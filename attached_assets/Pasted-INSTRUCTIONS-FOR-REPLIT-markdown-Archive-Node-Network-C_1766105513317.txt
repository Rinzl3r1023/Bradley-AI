INSTRUCTIONS FOR REPLIT:
markdown# Archive Node Network Code

## Overview
Archive the node network implementation (node.py) as it's not needed for MVP launch. 
We're focusing on Chrome extension + centralized API first, then will restore the 
node network in Q3 2026+ after market validation.

## Steps

### 1. Create Archive Directory Structure
````bash
mkdir -p archive/node-network
````

### 2. Create Archive README

Create file: `archive/node-network/README.md` with the following content:
````markdown
# Bradley Node Network (Archived - December 2025)

## âš ï¸ STATUS: DELAYED UNTIL Q3 2026+

### What This Is

Decentralized peer-to-peer node network for Bradley deepfake detection with:
- Distributed threat broadcasting (P2P relay)
- IPFS publishing (decentralized storage)
- Node reputation system (trust scoring)
- HMAC signature verification (security)
- Rate limiting (spam prevention)
- Encryption (Fernet-based data protection)

### Why Archived

**Decision**: Launch MVP first, then decentralize.

**Timeline**:
- âœ… Q4 2025: Built node network prototype
- ðŸ”’ Q4 2025: Archived (strategic delay)
- ðŸŽ¯ Q1 2026: Launch MVP (Chrome extension + centralized API)
- âœ… Q2 2026: Validate market demand (crypto nerds, early adopters)
- ðŸš€ Q3 2026+: Restore node network (if demand validated)

**Rationale**:
1. MVP faster without P2P complexity (weeks, not months)
2. Centralized API sufficient for validation (simpler)
3. Market validation first (prove demand before decentralizing)
4. Node network adds value AFTER product-market fit (not before)

This follows: Anti-Grid principle (don't build what you don't need yet) âœ…

### Architecture Overview

**Components**:
- **ThreadSafeState**: Thread-safe peer/threat management with rate limiting
- **NodeRegistry**: Node registration, discovery, and heartbeat tracking
- **GridNode**: Main node implementation with peer management and threat broadcasting
- **IPFS Integration**: Decentralized storage for threat data
- **Security**: HMAC-SHA256 signatures, endpoint validation, encryption

**Flow**:
1. Node receives threat detection result
2. Validates data schema
3. Signs with HMAC-SHA256
4. Publishes to IPFS (optional encryption)
5. Broadcasts to connected peers
6. Peers validate signature + data
7. Peers relay to their peers (gossip protocol)

### Dependencies
```python
# Core (archived - not needed for MVP)
requests>=2.31.0
cryptography>=41.0.0  # For Fernet encryption

# Environment Variables (for when restored)
GRID_SECRET_KEY=  # Shared secret for HMAC
GRID_ENCRYPTION_KEY=  # Fernet encryption key
IPFS_GATEWAY=https://ipfs.io
IPFS_API_URL=https://ipfs.infura.io:5001
IPFS_PROJECT_ID=
IPFS_PROJECT_SECRET=
```

### Known Issues & TODOs

**When Restoring**:
- [ ] Review and update dependencies (will be outdated)
- [ ] Add comprehensive docstrings
- [ ] Separate async/sync functions (currently mixed)
- [ ] Enhance endpoint validation (DNS rebinding protection)
- [ ] Add unit tests
- [ ] Update integration with current MVP architecture
- [ ] Security audit before production use

### Restoration Checklist

When ready to restore (Q3 2026+):

1. **Review Code**: Check for security updates, update dependencies
2. **Update Architecture**: Integrate with current MVP codebase
3. **Security Audit**: Re-audit all security functions, penetration testing
4. **Testing**: Unit tests, integration tests, load testing
5. **Deployment**: Infrastructure setup, monitoring, gradual rollout

### Design Decisions

**Why IPFS?**: Decentralized storage, content addressing, censorship resistant

**Why HMAC signatures?**: Shared secret model (simpler than PKI), fast verification

**Why rate limiting?**: Spam prevention, network health (10 broadcasts/min per node)

**Why reputation system?**: Trust scoring, identify bad actors, future token incentives

### Key Features

- Max 250 peers per node
- 10 broadcasts per minute rate limit
- 300 second peer timeout
- 1000 threat log entry maximum
- HTTPS-only peer connections
- Public IP validation (no private/loopback)
- Encrypted IPFS publishing (optional)
- Thread-safe operations throughout

---

**Created**: December 2025  
**Archived**: December 18, 2025  
**By**: Chris + Kim (The Business Lounge / Bradley AI)  
**Status**: Awaiting market validation before restoration  
**Next Review**: Q2 2026 (after MVP metrics)
````

### 3. Move node.py to Archive
````bash
mv node.py archive/node-network/
````

Or if using git:
````bash
git mv node.py archive/node-network/
````

### 4. Update Main README.md

Add the following section to the main `README.md` file (create section after 
"## Architecture" or "## Project Structure"):
````markdown
## Archived Features

### Node Network (Decentralized P2P)

**Status**: Archived  
**Location**: `archive/node-network/`  
**Reason**: Focusing on MVP first (Chrome extension + centralized API)  
**Timeline**: Will restore Q3 2026+ after market validation

The node network includes P2P threat broadcasting, IPFS publishing, reputation 
system, and distributed consensus. See `archive/node-network/README.md` for 
full details and restoration plan.

**Current Architecture** (MVP):
````
User (Chrome Extension) â†’ Detection API (Centralized) â†’ HuggingFace Models
````

**Future Architecture** (Post-Validation):
````
User (Extension) â†’ Grid Node (P2P) â†’ Other Grid Nodes â†’ IPFS Storage
````
````

### 5. Clean Up Dependencies (if needed)

If `cryptography` package was only used for node.py, remove it from 
`requirements.txt`:
````bash
# Check if cryptography is in requirements.txt
grep cryptography requirements.txt

# If found and only used for nodes, remove the line:
# Edit requirements.txt and delete the line:
# cryptography>=41.0.0
````

Keep these dependencies (needed for video detection):
````
torch>=2.0.0
transformers>=4.30.0
requests>=2.31.0
````

### 6. Commit Changes
````bash
git add archive/node-network/
git add README.md
git add requirements.txt  # if you modified it
git commit -m "Archive node network code (delayed until Q3 2026+)

Strategic decision to launch MVP first:
- Chrome extension + centralized API (simpler, faster)
- Validate market demand with crypto nerds (Q1-Q2 2026)
- Restore node network after validation (Q3 2026+)

This follows Anti-Grid principle: Don't build what you don't need yet.

Archived components:
- P2P node networking (GridNode, NodeRegistry, ThreadSafeState)
- IPFS publishing (decentralized storage)
- HMAC signature verification (security)
- Rate limiting + reputation system

See archive/node-network/README.md for full context and restoration plan."
````

## Expected Result

After completion:
````
Project Structure:
â”œâ”€â”€ archive/
â”‚   â””â”€â”€ node-network/
â”‚       â”œâ”€â”€ node.py (archived node network code)
â”‚       â””â”€â”€ README.md (comprehensive documentation)
â”œâ”€â”€ src/
â”‚   â””â”€â”€ detection/
â”‚       â””â”€â”€ video.py (production video detection - active)
â”œâ”€â”€ README.md (updated with archived features section)
â”œâ”€â”€ requirements.txt (cleaned up if needed)
â””â”€â”€ [other MVP files]
````

## Verification

After archiving, verify:
1. [ ] node.py is in `archive/node-network/` directory
2. [ ] `archive/node-network/README.md` exists and is comprehensive
3. [ ] Main `README.md` mentions archived features
4. [ ] `requirements.txt` cleaned (if cryptography removed)
5. [ ] Changes committed to git with clear message
6. [ ] Main directory only contains MVP code
7. [ ] No broken imports (nothing tries to import from node.py)

## Rollback (if needed)

If you need to restore node.py:
````bash
git mv archive/node-network/node.py ./
````

## Notes

- The node.py code is preserved and can be restored anytime
- All work is documented in the archive README
- Focus remains on MVP (Chrome extension + centralized API)
- This is strategic delay, not abandonment
- Code will be restored Q3 2026+ after market validation